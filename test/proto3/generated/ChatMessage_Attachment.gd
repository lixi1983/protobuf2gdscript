# Generated by protoc-gen-gdscript. DO NOT EDIT!
extends RefCounted

class_name ChatMessage_Attachment

extends RefCounted

const PROTO_VERSION = 2

var url = ""
var mime_type = ""
var size = 
var thumbnail = PackedByteArray([])

func _init():
	pass

func serialize() -> PackedByteArray:
	var bytes = PackedByteArray()
	if url != null:
		bytes.append_array(encode_varint(10))
		bytes.append_array(encode_value(url))
	if mime_type != null:
		bytes.append_array(encode_varint(18))
		bytes.append_array(encode_value(mime_type))
	if size != null:
		bytes.append_array(encode_varint(24))
		bytes.append_array(encode_value(size))
	if thumbnail != null:
		bytes.append_array(encode_varint(34))
		bytes.append_array(encode_value(thumbnail))
	return bytes

func deserialize(bytes: PackedByteArray) -> void:
	var pos = 0
	while pos < bytes.size():
		var tag = decode_varint(bytes, pos)
		pos += varint_size(tag)
		var field_number = tag >> 3
		var wire_type = tag & 0x07
		match field_number:
		1:
			url = decode_value(bytes, pos)
		2:
			mime_type = decode_value(bytes, pos)
		3:
			size = decode_value(bytes, pos)
		4:
			thumbnail = decode_value(bytes, pos)
		_:
			skip_unknown_field(bytes, wire_type, pos)

static func encode_varint(value: int) -> PackedByteArray:
	var bytes = PackedByteArray()
	while value > 0x7F:
		bytes.append((value & 0x7F) | 0x80)
		value >>= 7
	bytes.append(value & 0x7F)
	return bytes

static func decode_varint(bytes: PackedByteArray, pos: int) -> int:
	var result = 0
	var shift = 0
	while true:
		if pos >= bytes.size():
			break
		var b = bytes[pos]
		result |= (b & 0x7F) << shift
		if (b & 0x80) == 0:
			break
		shift += 7
		pos += 1
	return result

static func varint_size(value: int) -> int:
	var size = 0
	while value > 0x7F:
		size += 1
		value >>= 7
	return size + 1

static func skip_unknown_field(bytes: PackedByteArray, wire_type: int, pos: int) -> int:
	match wire_type:
		0: # varint
			while pos < bytes.size() && (bytes[pos] & 0x80) != 0:
				pos += 1
			return pos + 1
		1: # 64-bit
			return pos + 8
		2: # length-delimited
			var length = decode_varint(bytes, pos)
			pos += varint_size(length)
			return pos + length
		5: # 32-bit
			return pos + 4
		_:
			return pos