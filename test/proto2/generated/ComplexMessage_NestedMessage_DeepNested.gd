# Generated by protoc-gen-gdscript. DO NOT EDIT!
extends RefCounted

class_name ComplexMessage_NestedMessage_DeepNested

const PROTO_VERSION = 2

extends RefCounted

const PROTO_VERSION = 2

var data = ""
var numbers: Array = []

func _init():
	pass

func serialize() -> PackedByteArray:
	var bytes = PackedByteArray()
	if data != null:
		bytes.append_array(encode_varint(10))
		bytes.append_array(encode_value(data))
	if numbers != null:
		for item in numbers:
			bytes.append_array(encode_varint(16))
			bytes.append_array(encode_value(item))
	return bytes

func deserialize(bytes: PackedByteArray) -> void:
	var pos = 0
	while pos < bytes.size():
		var tag = decode_varint(bytes, pos)
		pos += varint_size(tag)
		var field_number = tag >> 3
		var wire_type = tag & 0x07
		match field_number:
		1:
			data = decode_value(bytes, pos)
		2:
			if numbers == null:
				numbers = []
			var value = decode_value(bytes, pos)
			numbers.append(value)
		_:
			skip_unknown_field(bytes, wire_type, pos)

static func encode_value(value) -> PackedByteArray:
	if value is int:
		return encode_varint(value)
	elif value is String:
		return encode_string(value)
	elif value is PackedByteArray:
		return encode_bytes(value)
	elif value is bool:
		return encode_varint(1 if value else 0)
	elif value is float:
		return encode_float(value)
	elif value is Dictionary:
		return encode_map(value)
	else:
		return value.serialize()

static func decode_value(bytes: PackedByteArray, pos: int) -> Variant:
	var value = decode_varint(bytes, pos)
	pos += varint_size(value)
	return value

static func encode_varint(value: int) -> PackedByteArray:
	var bytes = PackedByteArray()
	while value > 0x7F:
		bytes.append((value & 0x7F) | 0x80)
		value >>= 7
	bytes.append(value & 0x7F)
	return bytes

static func decode_varint(bytes: PackedByteArray, pos: int) -> int:
	var result = 0
	var shift = 0
	while true:
		if pos >= bytes.size():
			break
		var b = bytes[pos]
		result |= (b & 0x7F) << shift
		if (b & 0x80) == 0:
			break
		shift += 7
		pos += 1
	return result

static func encode_string(value: String) -> PackedByteArray:
	var bytes = value.to_utf8_buffer()
	var length = encode_varint(bytes.size())
	length.append_array(bytes)
	return length

static func encode_bytes(value: PackedByteArray) -> PackedByteArray:
	var length = encode_varint(value.size())
	length.append_array(value)
	return length

static func encode_float(value: float) -> PackedByteArray:
	var bytes = PackedByteArray()
	bytes.resize(8)
	bytes.encode_double(0, value)
	return bytes

static func encode_map(value: Dictionary) -> PackedByteArray:
	var bytes = PackedByteArray()
	for key in value:
		var entry = PackedByteArray()
		entry.append_array(encode_value(key))
		entry.append_array(encode_value(value[key]))
		bytes.append_array(encode_length_delimited(entry))
	return bytes

static func encode_length_delimited(value: PackedByteArray) -> PackedByteArray:
	var length = encode_varint(value.size())
	length.append_array(value)
	return length

static func varint_size(value: int) -> int:
	var size = 0
	while value > 0x7F:
		size += 1
		value >>= 7
	return size + 1

static func skip_unknown_field(bytes: PackedByteArray, wire_type: int, pos: int) -> int:
	match wire_type:
		0: # varint
			while pos < bytes.size() && (bytes[pos] & 0x80) != 0:
				pos += 1
			return pos + 1
		1: # 64-bit
			return pos + 8
		2: # length-delimited
			var length = decode_varint(bytes, pos)
			pos += varint_size(length)
			return pos + length
		5: # 32-bit
			return pos + 4
		_:
			return pos